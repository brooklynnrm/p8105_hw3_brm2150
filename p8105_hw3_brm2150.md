p8105_hw3_brm2150
================
Brooklynn McNeil
2024-10-07

## Problem 1

Clean the `ny_noaa` data by separating the variables for year, month,
and day. Ensure units for temp, precipitation, and snowfall. What is the
most commonly observed values for snowfall and why?

``` r
data("ny_noaa")

ny_noaa_clean = 
  ny_noaa |>
  filter(!if_any(prcp:tmin, is.na)) |>
  separate(date, into = c("year", "month", "day"), sep = "-") |>
  mutate(
    prcp = prcp/254, 
    snow = snow/25.4, 
    snwd = snwd/25.4,
    tmax = as.numeric(tmax),
    tmax = ((tmax*0.1*9/5) + 32),
    tmin = as.numeric(tmin),
    tmin = ((tmin*0.1*9/5) + 32)
    )
```

Make a two-panel plot showing the average max temperature in January and
in July in each station across years. Is there any observable /
interpretable structure? Any outliers?

``` r
#ny_noaa_clean |>
 # filter(month == c("01", "07")) |>
 #   mutate(
 #   month = case_match(month, "01" ~ "January", "07" ~ "July")
 # ) |>
  #ggplot(aes(x = day, y = tmin, color = year)) +
  #geom_point(alpha = 0.2) +
  #geom_smooth(se = FALSE, na.rm = TRUE) +
  #facet_grid(~month)
```

## Problem 2

Import and tidy accelerometer data.

``` r
nhanes_accel = 
  read_csv("data/nhanes_accel.csv") |>
  janitor::clean_names()|>
  pivot_longer(
    cols = starts_with("min"),
    names_to = "minute",
    names_prefix = "min",
    values_to = "MIMS")
```

    Rows: 250 Columns: 1441
    ── Column specification ────────────────────────────────────────────────────────
    Delimiter: ","
    dbl (1441): SEQN, min1, min2, min3, min4, min5, min6, min7, min8, min9, min1...

    ℹ Use `spec()` to retrieve the full column specification for this data.
    ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
nhanes_covar = 
  read_csv("data/nhanes_covar.csv", skip = 4) |>
  janitor::clean_names()
```

    Rows: 250 Columns: 5
    ── Column specification ────────────────────────────────────────────────────────
    Delimiter: ","
    dbl (5): SEQN, sex, age, BMI, education

    ℹ Use `spec()` to retrieve the full column specification for this data.
    ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
nhanes_tidy = 
  left_join(nhanes_accel, nhanes_covar, by = "seqn")|>
  filter(age>=21)|>
  drop_na()|>
  mutate(
    sex = case_when(
     sex == 1 ~ "male",
      sex == 2 ~ "female"),
    sex = factor(sex),
    education = case_when(
      education == 1 ~ "Below equivalent",
      education == 2 ~ "HS equivalent",
      education == 3 ~ "Above HS"),
    education = factor(education),
    minute = factor(minute),
    age = factor(age),
    seqn = factor(seqn)
     )
```

Reader friendly table for observing the number of men and women in each
education category.

``` r
nhanes_tidy|>
  group_by(sex, education) |>
  summarize(
    count = n()
  ) |>
  knitr::kable()
```

    `summarise()` has grouped output by 'sex'. You can override using the `.groups`
    argument.

| sex    | education        | count |
|:-------|:-----------------|------:|
| female | Above HS         | 84960 |
| female | Below equivalent | 40320 |
| female | HS equivalent    | 33120 |
| male   | Above HS         | 80640 |
| male   | Below equivalent | 38880 |
| male   | HS equivalent    | 50400 |

Create a visualization of the age distributions for men and women in
each educational category. Comment on these

## Problem 3

Import and tidy citi bike data.

``` r
jan_2020 = 
  read_csv("data/citibike/Jan 2020 Citi.csv") |>
  mutate(month = "january",
         year = "2020")
```

    Rows: 12420 Columns: 7
    ── Column specification ────────────────────────────────────────────────────────
    Delimiter: ","
    chr (6): ride_id, rideable_type, weekdays, start_station_name, end_station_n...
    dbl (1): duration

    ℹ Use `spec()` to retrieve the full column specification for this data.
    ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
jan_2024 = 
  read_csv("data/citibike/Jan 2024 Citi.csv")|>
  mutate(month = "january",
         year = "2024")
```

    Rows: 18861 Columns: 7
    ── Column specification ────────────────────────────────────────────────────────
    Delimiter: ","
    chr (6): ride_id, rideable_type, weekdays, start_station_name, end_station_n...
    dbl (1): duration

    ℹ Use `spec()` to retrieve the full column specification for this data.
    ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
jul_2020 = 
  read_csv("data/citibike/July 2020 Citi.csv")|>
  mutate(month = "july",
         year = "2020")
```

    Rows: 21048 Columns: 7
    ── Column specification ────────────────────────────────────────────────────────
    Delimiter: ","
    chr (6): ride_id, rideable_type, weekdays, start_station_name, end_station_n...
    dbl (1): duration

    ℹ Use `spec()` to retrieve the full column specification for this data.
    ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
jul_2024 = 
  read_csv("data/citibike/July 2024 Citi.csv")|>
  mutate(month = "july",
         year = "2024")
```

    Rows: 47156 Columns: 7
    ── Column specification ────────────────────────────────────────────────────────
    Delimiter: ","
    chr (6): ride_id, rideable_type, weekdays, start_station_name, end_station_n...
    dbl (1): duration

    ℹ Use `spec()` to retrieve the full column specification for this data.
    ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
citi_bike_df = 
  bind_rows(jan_2020, jan_2024, jul_2020, jul_2024)
```

Describe the data

``` r
citi_bike_df |>
  group_by(duration, weekdays) |>
  summarize()
```

    `summarise()` has grouped output by 'duration'. You can override using the
    `.groups` argument.

    # A tibble: 99,144 × 2
    # Groups:   duration [97,274]
       duration weekdays 
          <dbl> <chr>    
     1     1.00 Monday   
     2     1.01 Wednesday
     3     1.01 Sunday   
     4     1.01 Monday   
     5     1.01 Thursday 
     6     1.01 Monday   
     7     1.01 Tuesday  
     8     1.01 Friday   
     9     1.01 Saturday 
    10     1.01 Monday   
    # ℹ 99,134 more rows

``` r
citi_bike_df |>
  ggplot(aes(x = weekdays, duration, fill = member_casual)) +
  geom_boxplot()
```

![](p8105_hw3_brm2150_files/figure-gfm/unnamed-chunk-7-1.png)<!-- -->
