---
title: "p8105_hw3_brm2150"
author: "Brooklynn McNeil"
date: "2024-10-07"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE,
  fig.width = 6,
  fig.height = 6)

library(tidyverse)
library(p8105.datasets)
data("ny_noaa")
```

## Problem 1

Clean the `ny_noaa` data by separating the variables for year, month, and day. Ensure units for temp, precipitation, and snowfall. What is the most commonly observed values for snowfall and why?
```{r}
ny_noaa_clean = 
  ny_noaa |>
  filter(!if_any(prcp:tmin, is.na)) |>
  separate(date, into = c("year", "month", "day"), sep = "-") |>
  mutate(
    prcp = prcp/254, 
    snow = snow/25.4, 
    snwd = snwd/25.4,
    tmax = as.numeric(tmax),
    tmax = ((tmax*0.1*9/5) + 32),
    tmin = as.numeric(tmin),
    tmin = ((tmin*0.1*9/5) + 32)
    )
```

Make a two-panel plot showing the average max temperature in January and in July in each station across years. Is there any observable / interpretable structure? Any outliers?
```{r}
ny_noaa_clean |>
  filter(month == c("01", "07")) |>
    mutate(
    month = case_match(month, "01" ~ "January", "07" ~ "July")
  ) |>
  ggplot(aes(x = day, y = tmin, color = year)) +
  #geom_point(alpha = 0.2) +
  geom_smooth(se = FALSE, na.rm = TRUE) +
  facet_grid(~month)
```


## Problem 2

Import and tidy accelerometer data.
```{r}
nhanes_accel = 
  read_csv("data/nhanes_accel.csv") |>
  janitor::clean_names()|>
  pivot_longer(
    cols = min1:ncol(),
    names_to = "minute",
    values_to = "")

nhanes_covar = 
  read_csv("data/nhanes_covar.csv", skip = 4) |>
  janitor::clean_names()
```


## Problem 3

Import and tidy citi bike data.
```{r}
jan_2020 = 
  read_csv("data/citibike/Jan 2020 Citi.csv") |>
  mutate(month = "january",
         year = "2020")

jan_2024 = 
  read_csv("data/citibike/Jan 2024 Citi.csv")|>
  mutate(month = "january",
         year = "2024")

jul_2020 = 
  read_csv("data/citibike/July 2020 Citi.csv")|>
  mutate(month = "july",
         year = "2020")

jul_2024 = 
  read_csv("data/citibike/July 2024 Citi.csv")|>
  mutate(month = "july",
         year = "2024")

citi_bike_df = 
  bind_rows(jan_2020, jan_2024, jul_2020, jul_2024)
```

Describe the data

```{r}
citi_bike_df |>
  group_by(duration, weekdays) |>
  summarize()

citi_bike_df |>
  ggplot(aes(x = weekdays, duration, fill = member_casual)) +
  geom_boxplot()
```


